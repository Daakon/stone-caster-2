{
  "id": "performance_benchmarks",
  "version": "1.0.0",
  "description": "Performance benchmarks and optimization guidelines for RPG Storyteller AI system",
  "benchmarks": {
    "save_file_sizes": {
      "small": {
        "size_range": "0-50KB",
        "turn_count": "1-50",
        "npc_count": "1-10",
        "location_count": "1-15",
        "performance_target": "sub_second_response",
        "optimization_focus": "minimal"
      },
      "medium": {
        "size_range": "50-200KB",
        "turn_count": "50-200",
        "npc_count": "10-30",
        "location_count": "15-50",
        "performance_target": "1-3_second_response",
        "optimization_focus": "efficient_processing"
      },
      "large": {
        "size_range": "200-500KB",
        "turn_count": "200-500",
        "npc_count": "30-100",
        "location_count": "50-150",
        "performance_target": "3-5_second_response",
        "optimization_focus": "smart_caching"
      },
      "very_large": {
        "size_range": "500KB+",
        "turn_count": "500+",
        "npc_count": "100+",
        "location_count": "150+",
        "performance_target": "5-10_second_response",
        "optimization_focus": "aggressive_optimization"
      }
    },
    "complexity_metrics": {
      "relationship_web": {
        "simple": "1-10 relationships",
        "moderate": "10-50 relationships",
        "complex": "50-200 relationships",
        "very_complex": "200+ relationships"
      },
      "faction_interactions": {
        "simple": "1-3 factions",
        "moderate": "3-7 factions",
        "complex": "7-15 factions",
        "very_complex": "15+ factions"
      },
      "magical_effects": {
        "simple": "1-5 active effects",
        "moderate": "5-20 active effects",
        "complex": "20-50 active effects",
        "very_complex": "50+ active effects"
      }
    }
  },
  "optimization_strategies": {
    "save_file_optimization": {
      "data_compression": {
        "techniques": [
          "remove_redundant_data",
          "compress_relationship_arrays",
          "optimize_string_storage",
          "use_references_instead_of_duplicates"
        ],
        "target_reduction": "30-50% file size"
      },
      "incremental_saving": {
        "strategy": "save only changed data",
        "benefits": "faster saves, smaller files",
        "implementation": "track changes since last save"
      },
      "archival_strategy": {
        "old_turns": "compress and archive after 100 turns",
        "inactive_npcs": "archive after 50 turns of inactivity",
        "unused_locations": "archive after 20 turns of no visits"
      }
    },
    "processing_optimization": {
      "smart_caching": {
        "cache_priorities": [
          "active_npcs",
          "current_location",
          "recent_relationships",
          "active_effects"
        ],
        "cache_invalidation": "on_state_change",
        "cache_size_limit": "1000_entries"
      },
      "lazy_loading": {
        "load_strategy": "load only what's needed",
        "background_loading": "preload likely next content",
        "unload_strategy": "unload distant content"
      },
      "parallel_processing": {
        "npc_interactions": "process in parallel when possible",
        "world_simulation": "batch process off-screen events",
        "magical_effects": "resolve effects in parallel"
      }
    },
    "ai_response_optimization": {
      "context_limiting": {
        "max_context_size": "8000_tokens",
        "priority_context": [
          "current_scene",
          "active_npcs",
          "recent_events",
          "player_goals"
        ],
        "context_rotation": "rotate out old context"
      },
      "response_streaming": {
        "enable_streaming": true,
        "chunk_size": "100-200_tokens",
        "streaming_priority": "narrative_text_first"
      },
      "fallback_strategies": {
        "timeout_fallback": "return_simplified_response",
        "complexity_fallback": "reduce_scope_and_retry",
        "error_fallback": "graceful_degradation"
      }
    }
  },
  "performance_monitoring": {
    "key_metrics": {
      "response_time": {
        "target": "<3_seconds",
        "warning": "3-5_seconds",
        "critical": ">5_seconds"
      },
      "memory_usage": {
        "target": "<500MB",
        "warning": "500MB-1GB",
        "critical": ">1GB"
      },
      "save_file_size": {
        "target": "<200KB",
        "warning": "200-500KB",
        "critical": ">500KB"
      },
      "npc_count": {
        "target": "<50",
        "warning": "50-100",
        "critical": ">100"
      }
    },
    "performance_triggers": {
      "optimization_needed": [
        "response_time > 5_seconds",
        "memory_usage > 1GB",
        "save_file_size > 500KB",
        "npc_count > 100"
      ],
      "emergency_measures": [
        "response_time > 10_seconds",
        "memory_usage > 2GB",
        "save_file_corruption",
        "system_unresponsive"
      ]
    }
  },
  "scalability_guidelines": {
    "world_expansion": {
      "new_locations": "add gradually, max 5 per session",
      "new_npcs": "introduce slowly, max 3 per session",
      "new_mechanics": "test thoroughly before full implementation",
      "content_updates": "batch updates to reduce processing"
    },
    "multi_session_play": {
      "session_transitions": "smooth handoffs between sessions",
      "state_preservation": "maintain critical state across sessions",
      "performance_recovery": "optimize state on session start",
      "continuity_checks": "validate state consistency"
    },
    "concurrent_users": {
      "single_user": "optimized for individual play",
      "multi_user_considerations": "separate save files, no shared state",
      "scaling_strategy": "horizontal scaling with isolated instances"
    }
  },
  "optimization_priorities": {
    "critical": [
      "response_time_under_3_seconds",
      "save_file_integrity",
      "memory_usage_control"
    ],
    "important": [
      "smooth_world_simulation",
      "efficient_npc_processing",
      "fast_save_load_times"
    ],
    "nice_to_have": [
      "background_optimization",
      "predictive_loading",
      "advanced_caching"
    ]
  },
  "implementation_guidelines": {
    "development_phase": {
      "prototype": "focus on functionality over performance",
      "alpha": "implement basic optimization",
      "beta": "add advanced optimization",
      "release": "fine_tune_performance"
    },
    "testing_strategies": {
      "load_testing": "test with large save files",
      "stress_testing": "test with complex scenarios",
      "longevity_testing": "test over extended sessions",
      "recovery_testing": "test error recovery mechanisms"
    }
  }
}
