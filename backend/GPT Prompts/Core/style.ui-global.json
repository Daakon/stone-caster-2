{
  "id": "style.ui-global",
  "version": "1.0.1",
  "description": "Global, world-agnostic style definitions: glyphs, headers, templates, localization, and render hints (presentation only).",
  "$schema": "rpg/style.ui-global.schema.json",
  "awf": {
    "output": {
      "envelope": "json_object_only",
      "allow_markdown": false,
      "allow_html": false,
      "string_decorations": {
        "icons_allowed": true,
        "emoji_allowed": true
      }
    }
  },
  "glyphs": {
    "heart_full": "‚ô•",
    "heart_empty": "‚ô°",
    "dice": "üé≤",
    "spark": "‚ú®",
    "crit_success": "‚ú¥Ô∏è",
    "success": "‚úÖ",
    "partial": "‚ûñ",
    "fail": "‚ùå",
    "crit_fail": "‚ò†Ô∏è",
    "relationship_trust": "üå±",
    "relationship_warmth": "‚ù§Ô∏è",
    "relationship_energy": "‚ö°",
    "relationship_solid": "ü™®",
    "relationship_cool": "‚ùÑÔ∏è",
    "relationship_heal": "ü©π",
    "relationship_companion": "üêæ",
    "alert": "‚ö†Ô∏è",
    "arrow": "‚û°Ô∏è"
  },
  "chips": {
    "outcome_tiers": {
      "crit_success": "‚ú¥Ô∏è Crit Success",
      "success": "‚úÖ Success",
      "partial": "‚ûñ Partial",
      "fail": "‚ùå Fail",
      "crit_fail": "‚ò†Ô∏è Crit Fail"
    }
  },
  "relationship_glyphs": {
    "trust": "shield_check",
    "warmth": "hand_heart",
    "respect": "medal",
    "romance": "heart_full",
    "desire": "flame_small",
    "awe": "sparkles"
  },
  "desire_subglyphs": {
    "romance": "heart_outline",
    "desire": "flame_outline",
    "ambition": "flag",
    "fear": "alert",
    "curiosity": "compass",
    "loyalty": "link",
    "acceptance": "leaf"
  },
  "display_templates": {
    "name_hidden": "{alias_or_generated} ({faction_role} {faction_display})"
  },
  "headers": {
    "recap": "## ‚ú® Recap",
    "scene": "## üïØÔ∏è Scene",
    "rolls": "## üé≤ Rolls",
    "outcome": "## üìú Outcome",
    "choices": "## üî¢ Choices",
    "mechanics": "## ‚öôÔ∏è Fate Weave"
  },
  "dividers": {
    "soft": "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî",
    "heavy": "‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ‚óÜ"
  },
  "templates": {
    "scene": {
      "header": {
        "tpl": "**{location_name}** ‚Äî {time_icon} {time_label}{weather_suffix}",
        "inputs": [
          "location_name",
          "time_icon",
          "time_label",
          "weather_suffix"
        ],
        "notes": "Renderer must precompute {weather_suffix} as \", {weather_brief}\" or \"\"."
      }
    },
    "outcome": {
      "tpl": "**{chip}** ‚Äî You {text}",
      "inputs": ["chip", "text"],
      "render_if": "phase==='outcome_render'"
    },
    "choice": {
      "menu_header": {
        "tpl": "What do you do next?"
      },
      "item": {
        "tpl": "‚Ä¢ {choice_text}",
        "source": "choice.text",
        "inputs": ["choice_text"],
        "notes": "Hard guard: render only choice.text; do not merge beat/outcome text."
      },
      "hint": {
        "tpl": "_Hint: {reason}_",
        "render_if": "runtime.settings.show_mechanics === true"
      }
    },
    "npc": {
      "first_impression": {
        "tpl": "**{name_or_alias}** ‚Äî {observed_species}\n_{movement}_ {features}",
        "inputs": ["name_or_alias", "observed_species", "movement", "features"],
        "render_if": "context.first_meet === true"
      },
      "bio_promoted": {
        "tpl": "**{name}** ‚Äî {species}\n_Notable:_ {appearance.notable_features}\n_Quirks:_ {quirks}\n_Goals:_ {goals.short_term}",
        "render_if": "npc.state === 'promoted'"
      }
    },
    "mechanics": {
      "inline": {
        "tpl": "_[Check: {skill_name} vs {dc}]_",
        "render_if": "runtime.settings.show_mechanics === true",
        "inputs": ["skill_name", "dc"]
      },
      "panel": {
        "tpl": "**Mechanics**\n- Skill: {skill_name}\n- DC: {dc}\n- Roll: {roll}\n- Result: {result_label}",
        "render_if": "runtime.settings.show_mechanics === true",
        "inputs": ["skill_name", "dc", "roll", "result_label"]
      }
    },
    "relationship": {
      "delta": {
        "tpl": "{icon} {rel_name}: {delta_str}",
        "inputs": ["icon", "rel_name", "delta_str"]
      }
    },
    "inventory": {
      "junk": {
        "collapsed": {
          "tpl": "_Junk ({count})_: {summary_list}",
          "inputs": ["count", "summary_list"]
        },
        "expanded": {
          "tpl": "**Junk**\n{items}",
          "inputs": ["items"]
        }
      }
    }
  },
  "formatters": {
    "header_inputs": {
      "location_name": "string",
      "time_icon": "string",
      "time_label": "string",
      "weather_suffix": "string (\", {weather_brief}\" or \"\")"
    },
    "safety": {
      "strip_nulls_to_empty": true,
      "coerce_undefined_to": {
        "time_icon": "",
        "time_label": "",
        "weather_suffix": ""
      }
    }
  },
  "localization": {
    "location_tiers": {
      "Tier 0": "a safe zone (no active hostile threats)",
      "Tier 1": "a basic low‚Äëlevel conflict area (e.g., a slaver makeshift camp)",
      "Tier 2": "a patrolled area and defended camp with watch posts",
      "Tier 3": "a hardened stronghold"
    }
  },
  "ui_preferences": {
    "display_profile": "scene_rolls_outcome_choices"
  },
  "text_normalization": {
    "fantasy_writing_style": {
      "description": "Fantasy writing style normalization for immersive, non-AI-like prose",
      "dash_policy": {
        "narrative_dashes": "em-dash (‚Äî) with spaces for dramatic pauses and interruptions",
        "mechanical_dashes": "en-dash (‚Äì) for ranges and connections",
        "identifiers": "hyphen (-) for compound words and technical terms",
        "examples": {
          "narrative": "The door creaked open‚Äîrevealing a shadowy figure within.",
          "mechanical": "The journey took 3‚Äì5 days, depending on weather.",
          "identifier": "wolf-kin, dire-elkhorn, north-spur"
        }
      },
      "quotation_style": {
        "dialogue": "curly quotes (\") for character speech",
        "thoughts": "single quotes (') for internal thoughts",
        "emphasis": "italics for emphasis, not quotes",
        "examples": {
          "dialogue": "\"I've never seen anything like this,\" she whispered.",
          "thoughts": "'This can't be real,' he thought.",
          "emphasis": "The ancient *magic* pulsed with power."
        }
      },
      "spacing_rules": {
        "paragraph_breaks": "Single line breaks for scene transitions",
        "dialogue_spacing": "No extra spacing around dialogue tags",
        "list_spacing": "Tight spacing for item lists",
        "examples": {
          "paragraph": "The forest grew darker.\n\nA twig snapped.",
          "dialogue": "\"Hello,\" said Kiera. \"Are you lost?\"",
          "list": "‚Ä¢ Sword\n‚Ä¢ Shield\n‚Ä¢ Potion"
        }
      },
      "fantasy_voice": {
        "avoid_ai_patterns": [
          "Don't use excessive dashes or bullet points",
          "Avoid technical or clinical language",
          "Use immersive, descriptive prose",
          "Maintain character voice consistency",
          "Prefer natural flow over structured lists"
        ],
        "preferred_patterns": [
          "Rich sensory descriptions",
          "Character-driven dialogue",
          "Atmospheric world-building",
          "Emotional resonance",
          "Mysterious and wondrous tone"
        ]
      }
    }
  },
  "rendering_rules": [
    "Render section headers using the 'headers' mapping.",
    "Apply 'localization.location_tiers' to dialogue/narration output only; never alter internal keys.",
    "Keep outputs scannable with concise icon cues (üé≤, üíô, ‚ö†Ô∏è, ‚ñ∏).",
    "Keep Fate Weave lines to a single sentence.",
    "Resolve in order: Scene Header ‚Üí Rolls ‚Üí Outcome ‚Üí Choices.",
    "Max 3 glyphs per line unless hearts meter or explicit icon list.",
    "Fallback to plain text if glyphs unavailable.",
    "Apply fantasy writing style normalization to all narrative text.",
    "Use em-dashes (‚Äî) for dramatic pauses, en-dashes (‚Äì) for ranges, hyphens (-) for compounds.",
    "Maintain immersive fantasy voice; avoid AI-like patterns or excessive formatting."
  ]
}
